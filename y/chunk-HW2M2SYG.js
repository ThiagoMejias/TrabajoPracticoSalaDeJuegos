import{a as M,c as E}from"./chunk-WXLO2PSY.js";import{Eb as D,Oa as g,Qa as s,Ra as C,Z as p,ca as f,db as v,e as z,fb as b,g as l,ha as k,ib as w,mb as a,nb as o,ob as y,qb as m,rb as I,wb as d,yb as x,z as u}from"./chunk-UL3UKDAI.js";var h=z(E());var _=(()=>{let i=class i{constructor(e){this.http=e,this.apiUrl="https://deckofcardsapi.com/api/deck",this.deckId=null,this.deckInitialized=this.initializeDeck()}initializeDeck(){return new Promise((e,r)=>{this.http.get(`${this.apiUrl}/new/shuffle/?deck_count=1`).subscribe(t=>{this.deckId=t.deck_id,e()},t=>{r(t)})})}getRandomCard(){if(!this.deckId)throw new Error("Deck ID is not set");return this.http.get(`${this.apiUrl}/${this.deckId}/draw/?count=1`).pipe(u(e=>{if(e.cards.length===0)throw this.reshuffleDeck(),new Error("No more cards in the deck");return{card:e.cards[0],remaining:e.remaining}}))}reshuffleDeck(){return this.http.get(`${this.apiUrl}/${this.deckId}/shuffle/`).pipe(u(e=>e.success))}waitForDeckInitialization(){return this.deckInitialized}};i.\u0275fac=function(r){return new(r||i)(f(M))},i.\u0275prov=p({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();function R(n,i){if(n&1&&(a(0,"div",2),y(1,"img",6),o()),n&2){let S=I();s(),b("src",S.card.image,g)}}var T=(()=>{let i=class i{constructor(e){this.deckService=e,this.score=0,this.deckHaveCards=!0}ngOnInit(){this.deckService.waitForDeckInitialization().then(()=>{this.getRandomCard()}).catch(e=>{console.error("Failed to initialize deck:",e)})}startGame(){return l(this,null,function*(){yield this.reshuffleDeck(),this.score=0,this.deckHaveCards=!0,this.getRandomCard()})}requestCard(e){return l(this,null,function*(){let r=this.getCardValue(this.card.value);yield this.getRandomCard();let t=this.getCardValue(this.card.value);e==="mayor"&&t>r||e==="menor"&&t<r?this.score++:t!=r&&h.default.fire({backdrop:!1,background:"#fff !important",color:"white",title:"Perdio!",text:`Su puntaje ha sido de ${this.score}`,confirmButtonText:"Jugar nuevamente",cancelButtonText:"Volver al men\xFA principal",showCancelButton:!0}).then(c=>{c.value?this.startGame():c.dismiss===h.default.DismissReason.cancel&&(window.location.href="")})})}getCardValue(e){switch(e){case"ACE":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;case"10":return 10;case"JACK":return 11;case"QUEEN":return 12;case"KING":return 13;default:return 0}}getRandomCard(){return new Promise((e,r)=>{this.deckService.getRandomCard().subscribe(t=>{this.previousCard=this.card,this.card=t.card,this.deckHaveCards=t.remaining>0,e()},t=>{console.error(t.message),r(t)})})}reshuffleDeck(){return new Promise((e,r)=>{this.deckService.reshuffleDeck().subscribe(t=>{e()},t=>{console.error(t.message),r(t)})})}};i.\u0275fac=function(r){return new(r||i)(C(_))},i.\u0275cmp=k({type:i,selectors:[["app-mayor-menor"]],standalone:!0,features:[D],decls:9,vars:2,consts:[[1,"container-game"],[1,"score"],[1,"container-card"],[1,"container-buttons","mt-5"],[1,"btn","btn-primary","btn-higher",3,"click"],[1,"btn","btn-primary","btn-minor",3,"click"],["alt","Carta",3,"src"]],template:function(r,t){r&1&&(a(0,"div",0)(1,"p",1),d(2),o(),v(3,R,2,1,"div",2),a(4,"div",3)(5,"button",4),m("click",function(){return t.requestCard("mayor")}),d(6,"Mayor"),o(),a(7,"button",5),m("click",function(){return t.requestCard("menor")}),d(8,"Menor"),o()()()),r&2&&(s(2),x("Puntuaci\xF3n: ",t.score,""),s(),w(3,t.card?3:-1))},styles:[".container-game[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin-top:25vh}.btn-minor[_ngcontent-%COMP%]{background-color:#e2131362!important;border:none!important;margin:10px}.btn-higher[_ngcontent-%COMP%]{background-color:#085f2598!important;border:none!important;margin:10px}.score[_ngcontent-%COMP%]{font-size:20px;color:#fff!important}"]});let n=i;return n})();export{T as a};
